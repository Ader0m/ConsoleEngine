# ConsoleEngine (19.01.2024)

Библиотека создавалась для ускорения создания консольных интерфейсов в рамках консольного приложения, которые остаются самым дешевым инструментом проверки готового функционала. 
Цель данной библиотеки релизовать по умолчанию управляющий интерфейс  программы (меню с кнопками) и систему переходов между этими окнами.

# ConsoleEngine.Template

Проект с примером создания “Меню” и “Подменю”.
Согласно метрикам проект имеет 10 строк исполняемого кода.

# ConsoleEngine.Core

Библиотека содержит реализованный функционал.

Далее описаны главные компоненты.

## ConsoleWindow

Абстрактный класс. Оболочка для консольного окна с меню.

### Конструктор

| Доступ | Имя(сигнатура) | Описание |
| --- | --- | --- |
| public | …(string title, SelectController selectController = null) | SelectController необходим для работы окна. Устанавливается напрямую в конструкторе наследника. |

### Свойства

| Доступ | Тип данных | Имя | Доступ к записи | Описание |
| --- | --- | --- | --- | --- |
| public | string | Title | private | Заголовок окна, достроенный билдером. |

### Поля

| Доступ | Тип данных | Имя | Описание |
| --- | --- | --- | --- |
| public | readonly string | RawTitle | Заголовок окна. |
| protected | SelectController | _selectController | Реализует выбор пользователем опции из меню. Требует заполнения кнопками MenuButton. |
| private | stirng | _windowView | Содержит построенное окно в виде строки. |

### Методы

| Доступ | Имя(сигнатура) | Описание |
| --- | --- | --- |
| public | Show() | Добавляет себя в стек окон WindowsController. Отрисовывает текущее окно в консоли. Слушает ввод пользователя через SelectController. |

## SelectController

Реализует выбор пользователем опции из меню. Требует заполнения кнопками MenuButton.

### Конструктор

| Доступ | Имя(сигнатура) | Описание |
| --- | --- | --- |
| public | …(List<MenuButton> buttons, bool isFirstWindow = false, bool isBackButton = true) | В конструкторе окна необходимо создать и заполнить список кнопок. isFirstWindow управляет названием кнопки. isBackButton управляет наличием кнопки "Назад/Выход". |

### Свойства

| Доступ | Тип данных | Имя | Доступ к записи | Описание |
| --- | --- | --- | --- | --- |
| public | IReadOnlyList<string> | OptionsList | Отсутствует | Свойство для возврата списка с названием кнопок, для формирования окна. |

### Поля

| Доступ | Тип данных | Имя | Описание |
| --- | --- | --- | --- |
| private | readonly List<MenuButton> | _buttons | Список кнопок. |

### Методы

| Доступ | Имя(сигнатура) | Описание |
| --- | --- | --- |
| public | ListenInput() | Ожидает ввода uint (номера кномпи меню). Вызывает метод соответствующей кнопки. |

## WindowsController

Синглтон. Управляет межоконными действиями.

### Свойства

| Доступ | Тип данных | Имя | Доступ к записи | Описание |
| --- | --- | --- | --- | --- |
| public | static WindowsController | Instance | Отсутствует | Взятие объекта по принципу синглтона. |
| internal | Dictionary<string, ConsoleWindow> | Windows | private | Нужен для обращения к  “другим ”окнам. |

### Поля

| Доступ | Тип данных | Имя | Описание |
| --- | --- | --- | --- |
| internal | bool | IsNeedPause | Просит пользователя нажать Enter после выполнения опции меню. |
| private | bool | _isBackButton | Так как "назад" тоже опция, этот флаг отменяет приостановку. |
| private | ConsoleWindow | _currentWindow | Текущее окно/окно, которое нужно открыть. |
| private | Stack<ConsoleWindow> | _backWindows | Хранит историю окон. Используется для возвращения назад. |

### Методы

| Доступ | Имя(сигнатура) | Описание |
| --- | --- | --- |
| public | StartUp(ConsoleWindow startMenu) | Запуск приложения. Цикл контролирует паузу, и открытие нужного окна. |
| internal | StartWindowShow(ConsoleWindow window) | Регестрирует открытие окна. Нужно для истории. |
| internal | RegWindow(ConsoleWindow window, string rawTitle) | Регестрирует окно в системе приложения. Нужно для межоконного доступа. |
| public | OnClick_BackButton() | Возвращает к предыдущему окну. Открыт для создания своих кнопок назад. |

## Пути улучшения

- Добавить место под заголовком для динамической информации выводимой в текущем окне.
- Избежать неочевидного объявления контроллера в конструкторе окна.
